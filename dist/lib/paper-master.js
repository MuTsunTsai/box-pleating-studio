"undefined"==typeof Worker?importScripts("paper-worker.js"):function(){var e;const r=[],n=[],s=[],t=Math.max((null!==(e=navigator.hardwareConcurrency)&&void 0!==e?e:4)-2,1);for(let e=0;e<t;e++)r.push(new Worker("./paper-worker.js")),n.push(!1);onmessage=async function(e){if(e.ports[0]){let t=await function(){let e=n.findIndex((e=>!e));return e>=0?(n[e]=!0,e):new Promise((e=>s.push(e)))}(),o=new MessageChannel;o.port1.onmessage=r=>{e.ports[0].postMessage(r.data),s.length?s.shift()(t):n[t]=!1},r[t].postMessage(e.data,[o.port2])}}}();